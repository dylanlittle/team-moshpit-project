<head th:fragment="headerStyles">
    <link rel="stylesheet" th:href="@{/navbar.css}">
    <link rel="stylesheet" th:href="@{/artist-dialogue.css}">
</head>

<div th:fragment="headerNav">
    <nav class="navbar">

        <!-- Left: Logo + Navigation -->
        <div class="nav-left">
            <a href="/" class="nav-logo">Home</a>

            <ul class="nav-links">
                <li><a href="/discover">Discover Artists</a></li>
                <li><a href="#">Concerts</a></li>
            </ul>
        </div>

        <!-- Center: Search -->
        <div class="nav-search">
            <form th:action="@{/search}" method="get">
                <input
                        type="search"
                        name="query"
                        th:value="${query}"
                        placeholder="Search for Artists or Users"
                        aria-label="Search for Artists or Users"
                />
                <input type="hidden" name="type" value="all" />

            </form>
        </div>

        <div th:if="${isAdminMode}" class="admin-banner">
        <span>Currently Managing:
            <strong th:text="${activeAdminArtist.name}">Artist Name</strong>
        </span>
            <form th:action="@{/switch-to-user}" method="post" style="display:inline;">
                <button type="submit">Exit Admin Mode</button>
            </form>
        </div>

        <!-- Right: Profile -->
        <div class="nav-right">
            <div class="profile-dropdown">
                <a href="/user" class="profile-link">
                    <img th:src="${user != null && user.avatar != null && !user.avatar.isEmpty()}
            ? ${user.avatar}
            : @{/uploads/profile_placeholder.png}"
                         alt="Profile"
                         class="profile-avatar" />
                </a>

                <ul class="dropdown-content">
                    <li><a href="/user">View Profile</a></li>
                    <li>
                        <button type="button"
                                class="dropdown-btn"
                                data-dialog-open="myArtists"
                                onclick="document.getElementById('myArtists').showModal()">
                            Manage My Artists
                        </button>
                    </li>
                    <li>
                        <hr>
                        <form th:action="@{/logout}" method="post">
                            <button type="submit" class="logout-btn">Logout</button>
                        </form>
                    </li>
                </ul>
            </div>
        </div>

    </nav>
    <div th:replace="~{fragments/action-dialogue :: dialog(
        title='My Artists',
        id='myArtists',
        cta_link='/artists/new',
        cta='Add new artist',
        content=(~{fragments/user-artists :: artistList})
    )}"></div>
</div>
