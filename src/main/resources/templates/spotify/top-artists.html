<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Your Top Artists</title>
</head>
<body>

<h1>Your Spotify Top Artists</h1>

<a th:href="@{/user}">Back to Profile</a><br>
<p></p>
<form method="get" th:action="@{/spotify/top-artists}">
    <select name="timeRange">
        <option value="short_term" th:selected="${timeRange == 'short_term'}">Last 4 weeks</option>
        <option value="medium_term" th:selected="${timeRange == 'medium_term'}">Last 6 months</option>
        <option value="long_term" th:selected="${timeRange == 'long_term'}">All time-ish</option>
    </select>
    <button type="submit">Update</button>
</form>

<div th:if="${#lists.isEmpty(topArtists)}">
    <p>No top artists returned yet â€” try listening more on Spotify, or check again later.</p>
</div>

<ul>
    <li th:each="a : ${topArtists}">
        <div style="display:flex; gap:12px; align-items:center;">
            <img th:if="${a.images != null and !#lists.isEmpty(a.images)}"
                 th:src="${a.images.get(0).url}"
                 style="width:64px; height:64px; object-fit:cover; border-radius:8px;" />
            <div>
                <div><strong th:text="${a.name}"></strong></div>
                <div th:if="${suggestions.containsKey(a.id)}">
                    <a th:href="@{/artists/{id}(id=${suggestions.get(a.id).id})}">View on Mosh Pit</a>
                </div>
                <div th:unless="${suggestions.containsKey(a.id)}">
                    <span>Not on Mosh Pit yet</span>
                </div>
            </div>
        </div>
    </li>
</ul>

</body>
</html>
