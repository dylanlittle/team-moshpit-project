<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Add New Concert Date</title>
    <link rel="stylesheet" href="/main.css" />
    <link rel="stylesheet" href="/navbar.css"/>
    <link rel="stylesheet" href="/create-concert.css"/>
    <link rel="stylesheet" href="/theme.css"/>
    <script src="/js/concert_create.js" defer></script>
    <th:block th:replace="~{fragments/timezone-script :: timezone-detector}"></th:block>
</head>

<body>
<header class="page-header">
    <div th:insert="~{fragments/navbar :: headerNav}"></div>
</header>

<!-- Show only if User is actively Artist Admin role -->
<th:block th:if="${isAdminMode and activeAdminArtist.id == artist.id}">
    <div class="box">
        <p th:text="'Artist: ' + ${artist.name}"></p>
        <form th:action="@{/artists/{id}/concerts(id=${artist.id})}" method="post" th:object="${concertForm}" enctype="multipart/form-data">
            <div>
                <label for="concert-name">Name (optional):</label>
                <input type="text" th:field="*{concertName}" name="concert-name" id="concert-name"/>
            </div>

            <div>
                <label for="date">Date:</label>
                <input type="date" th:field="*{concertDate}" name="date" id="date" required/>
            </div>

            <div>
                <label for="start-time">Start time:</label>
                <input type="time" th:field="*{startTime}" name="start-time" id="start-time" required/>
            </div>

            <div>
                <label for="country">Country:</label>
                <input type="text" th:field="*{country}" name="country" id="country" list="countries-list" placeholder="Start typing country name..." autocomplete="off" required/>
                <datalist id="countries-list">
                    <option th:each="country : ${countries}" th:value="${country}"></option>
                </datalist>
            </div>

            <div>
                <label for="city">City:</label>
                <input type="text" th:field="*{city}" name="city" id="city" list="cities-list" placeholder="Start typing city name..." autocomplete="off" required/>
                <datalist id="cities-list">
                    <!-- Dynamically populated based on country (using JS) -->
                </datalist>
            </div>

            <div>
                <label for="venue-name">Venue Name:</label>
                <input type="text" th:field="*{venueName}" name="venue-name" id="venue-name" list="venues-list" placeholder="Start typing venue name..." autocomplete="off" required/>
                <datalist id="venues-list">
                    <!-- Dynamically populated based on city (using JS) -->
                </datalist>
            </div>

            <div>
                <label for="venue-address">Address:</label>
                <input type="text" th:field="*{address}" name="address" id="venue-address" required />
            </div>

            <div class="mb-3">
                <label for="concert-image">Image:</label><br>
                <input type="file"
                       id="concert-image"
                       name="image"
                       accept="image/*">
                <button type="button"
                        id="clearMediaBtn"
                        class="btn btn-outline-secondary btn-sm mt-2 d-none">
                    Remove selected file
                </button>
            </div>

        <button type="submit" id="new-concert-submit">Add New Concert</button>
    </form>
</body>
</html>